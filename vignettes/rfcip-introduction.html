<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Introduction to rfcip</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Introduction to rfcip</h1>


<div id="TOC">
<ul>
<li><a href="#introduction" id="toc-introduction">Introduction</a></li>
<li><a href="#supported-data-sources" id="toc-supported-data-sources">Supported Data Sources</a>
<ul>
<li><a href="#summary-of-business" id="toc-summary-of-business">Summary
of Business</a>
<ul>
<li><a href="#summary-of-business-by-type-practice-and-unit-structure" id="toc-summary-of-business-by-type-practice-and-unit-structure">Summary
of Business by Type, Practice, and Unit Structure</a></li>
</ul></li>
<li><a href="#cause-of-loss-files" id="toc-cause-of-loss-files">Cause of
Loss Files</a></li>
<li><a href="#price" id="toc-price">Price</a></li>
<li><a href="#reinsurance-agreements" id="toc-reinsurance-agreements">Reinsurance Agreements</a>
<ul>
<li><a href="#standard-reinsurance-agreement" id="toc-standard-reinsurance-agreement">Standard Reinsurance
Agreement</a></li>
<li><a href="#livestock-price-reinsurance-agreement" id="toc-livestock-price-reinsurance-agreement">Livestock Price
Reinsurance Agreement</a></li>
</ul></li>
<li><a href="#livestock-and-dairy-participation-reports" id="toc-livestock-and-dairy-participation-reports">Livestock and Dairy
Participation Reports</a></li>
<li><a href="#actuarial-data-master-adm" id="toc-actuarial-data-master-adm">Actuarial Data Master (ADM)</a>
<ul>
<li><a href="#available-datasets" id="toc-available-datasets">Available
Datasets</a></li>
</ul></li>
</ul></li>
<li><a href="#caching-and-performance" id="toc-caching-and-performance">Caching and Performance</a>
<ul>
<li><a href="#how-caching-works" id="toc-how-caching-works">How Caching
Works</a>
<ul>
<li><a href="#two-tier-caching-system" id="toc-two-tier-caching-system">Two-Tier Caching System</a></li>
</ul></li>
<li><a href="#force-parameter-and-cache-refresh" id="toc-force-parameter-and-cache-refresh">Force Parameter and Cache
Refresh</a></li>
<li><a href="#cache-management" id="toc-cache-management">Cache
Management</a>
<ul>
<li><a href="#viewing-cache-information" id="toc-viewing-cache-information">Viewing Cache Information</a></li>
<li><a href="#clearing-cache" id="toc-clearing-cache">Clearing
Cache</a></li>
</ul></li>
</ul></li>
</ul>
</div>

<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(rfcip)</span></code></pre></div>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>This vignette provides an introduction to the <code>rfcip</code>
package which provides tools for accessing publicly available data
related to the Federal Crop Insurance Program (FCIP). The package
includes functions for accessing data from RMA’s <a href="https://www.rma.usda.gov/tools-reports/summary-of-business">Summary
of Business</a> reports, <a href="https://www.rma.usda.gov/tools-reports/summary-business/cause-loss">Cause
of Loss</a> files, <a href="https://public-rma.fpac.usda.gov/apps/PriceDiscovery/">Price
Discovery</a> application, <a href="https://www.rma.usda.gov/tools-reports/reinsurance-reports">Reinsurance
Agreements</a>, <a href="https://www.rma.usda.gov/tools-reports/summary-of-business/livestock-dairy-participation">Livestock
and Dairy Participation</a> reports, and <a href="https://pubfs-rma.fpac.usda.gov/pub/References/actuarial_data_master/">Actuarial
Data Master (ADM)</a> datasets.</p>
</div>
<div id="supported-data-sources" class="section level1">
<h1>Supported Data Sources</h1>
<div id="summary-of-business" class="section level2">
<h2>Summary of Business</h2>
<p>The <a href="https://www.rma.usda.gov/tools-reports/summary-of-business">Summary
of Business</a> files produced by the USDA Risk Management Agency
contains crop insurance participation measures and outcomes by state,
county, crop, and insurance policy choices. Insured acres, collected
premiums, disbursed subsides, liabilities, number of policies sold,
number of indemnified policies, and loss ratios are all available from
the summary of business.</p>
<p>Accessing data from the summary of business can be done using the
<code>get_sob_data</code>. With no arguments specified, the
<code>get_sob_data</code> function will default to downloading data from
<a href="https://public-rma.fpac.usda.gov/apps/SummaryOfBusiness/ReportGenerator">RMA’s
summary of business report generator</a> for the current year, at the
highest level aggregation.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">library</span>(rfcip)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">get_sob_data</span>()</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="co">#&gt; # A tibble: 11 × 21</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co">#&gt;    commodity_year policies_sold policies_earning_prem policies_indemnified units_earning_prem</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co">#&gt;             &lt;dbl&gt;         &lt;dbl&gt;                 &lt;dbl&gt;                &lt;dbl&gt;              &lt;dbl&gt;</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="co">#&gt;  1           2025       2525186               1220168               115193            2989668</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co">#&gt;  2           2025           806                     0                    0                  0</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="co">#&gt;  3           2025            82                    79                    0                126</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co">#&gt;  4           2025         56924                 24178                 1041              82970</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="co">#&gt;  5           2025            60                    28                    5                 84</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="co">#&gt;  6           2025           795                   365                  249               4808</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="co">#&gt;  7           2025          2514                  2069                  448               3836</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="co">#&gt;  8           2025          3909                  3466                  368               5508</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="co">#&gt;  9           2025            16                    14                    0                 14</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="co">#&gt; 10           2025          7669                  6982                 5736              25889</span></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="co">#&gt; 11           2025          2043                  2043                 1281              18210</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="co">#&gt; # ℹ 16 more variables: units_indemnified &lt;dbl&gt;, quantity &lt;dbl&gt;, quantity_type &lt;chr&gt;,</span></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a><span class="co">#&gt; #   companion_endorsed_acres &lt;dbl&gt;, liabilities &lt;dbl&gt;, total_prem &lt;dbl&gt;, subsidy &lt;dbl&gt;, indemnity &lt;dbl&gt;,</span></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="co">#&gt; #   efa_prem_discount &lt;dbl&gt;, addnl_subsidy &lt;dbl&gt;, state_subsidy &lt;dbl&gt;, pccp_state_matching_amount &lt;dbl&gt;,</span></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a><span class="co">#&gt; #   organic_certified_subsidy_amount &lt;dbl&gt;, organic_transitional_subsidy_amount &lt;dbl&gt;,</span></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="co">#&gt; #   earn_prem_rate &lt;dbl&gt;, loss_ratio &lt;dbl&gt;</span></span></code></pre></div>
<p>Most of the arguments for the <code>get_sob_data</code> function
filter the returned data. For example, specifying the
<code>year = 2022</code> and <code>crop = &quot;corn&quot;</code> will return data
for corn in crop year 2022. For a description of all the arguments that
can be supplied to <code>get_sob_data</code> see the help file for the
function using <code>help(get_sob_data)</code></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">get_sob_data</span>(<span class="at">year =</span> <span class="dv">2022</span>, <span class="at">crop =</span> <span class="st">&quot;corn&quot;</span>)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 23</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="co">#&gt;   commodity_year commodity_code commodity_name policies_sold policies_earning_prem policies_indemnified</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co">#&gt;            &lt;dbl&gt;          &lt;int&gt; &lt;chr&gt;                  &lt;dbl&gt;                 &lt;dbl&gt;                &lt;dbl&gt;</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="co">#&gt; 1           2022             41 Corn                  590774                388012               106763</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="co">#&gt; # ℹ 17 more variables: units_earning_prem &lt;dbl&gt;, units_indemnified &lt;dbl&gt;, quantity &lt;dbl&gt;,</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="co">#&gt; #   quantity_type &lt;chr&gt;, companion_endorsed_acres &lt;dbl&gt;, liabilities &lt;dbl&gt;, total_prem &lt;dbl&gt;,</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="co">#&gt; #   subsidy &lt;dbl&gt;, indemnity &lt;dbl&gt;, efa_prem_discount &lt;dbl&gt;, addnl_subsidy &lt;dbl&gt;, state_subsidy &lt;dbl&gt;,</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="co">#&gt; #   pccp_state_matching_amount &lt;dbl&gt;, organic_certified_subsidy_amount &lt;dbl&gt;,</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="co">#&gt; #   organic_transitional_subsidy_amount &lt;dbl&gt;, earn_prem_rate &lt;dbl&gt;, loss_ratio &lt;dbl&gt;</span></span></code></pre></div>
<p>In the above example, the data set was filtered to a single crop,
“corn”. This potentially raises the question of what other values can be
passed to the arguments that control the filters. For arguments with
limited options, the options are explained in the functions help file
(again, accessed via <code>help(get_sob_data)</code>). For some
arguments that have many options, there are dedicated functions for
pulling up values than can be passed to these arguments.</p>
<p>The <code>get_crop_codes</code> function will return the
commodity_code and commodity_name for a supplied year. Note that the
<code>commodity_code</code> and <code>commodity_name</code> can be used
interchangeably as values for the <code>crop</code> argument in
<code>get_sob_data</code>. If there is a crop that is suspected to be an
option, the <code>comm</code> argument can also be specified which will
return just that specified crop if it exists.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># get all crop codes and crop names for 2024</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="fu">get_crop_codes</span>(<span class="dv">2024</span>)</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="co">#&gt; # A tibble: 129 × 3</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co">#&gt;    commodity_year commodity_code commodity_name        </span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;          &lt;chr&gt;          &lt;chr&gt;                 </span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="co">#&gt;  1 2024           0107           Alfalfa Seed          </span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="co">#&gt;  2 2024           0211           All Other Citrus Trees</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="co">#&gt;  3 2024           0028           Almonds               </span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="co">#&gt;  4 2024           0332           Annual Forage         </span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="co">#&gt;  5 2024           1191           Apiculture            </span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="co">#&gt;  6 2024           0184           Apple Trees           </span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a><span class="co">#&gt;  7 2024           0054           Apples                </span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="co">#&gt;  8 2024           0212           Avocado Trees         </span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="co">#&gt;  9 2024           0019           Avocados              </span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="co">#&gt; 10 2024           0255           Banana                </span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a><span class="co">#&gt; # ℹ 119 more rows</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="co"># double check that &quot;corn&quot; is a valid crop</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="fu">get_crop_codes</span>(<span class="dv">2024</span>, <span class="at">crop =</span> <span class="st">&quot;corn&quot;</span>)</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 3</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="co">#&gt;   commodity_year commodity_code commodity_name</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;          &lt;chr&gt;          &lt;chr&gt;         </span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="co">#&gt; 1 2024           0041           Corn</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="co"># below are other ways to call the same data</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="fu">get_crop_codes</span>(<span class="dv">2024</span>, <span class="at">crop =</span> <span class="st">&quot;CORN&quot;</span>)</span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 3</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="co">#&gt;   commodity_year commodity_code commodity_name</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;          &lt;chr&gt;          &lt;chr&gt;         </span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="co">#&gt; 1 2024           0041           Corn</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a><span class="fu">get_crop_codes</span>(<span class="dv">2024</span>, <span class="at">crop =</span> <span class="dv">41</span>)</span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 3</span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a><span class="co">#&gt;   commodity_year commodity_code commodity_name</span></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;          &lt;chr&gt;          &lt;chr&gt;         </span></span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a><span class="co">#&gt; 1 2024           0041           Corn</span></span></code></pre></div>
<p>The <code>get_insurance_plan_codes</code> function works analogously
to the <code>get_crop_codes</code> function and helps identiy valid
names of insurance plans.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># return all insurance plans avaliable in 2024</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="fu">get_insurance_plan_codes</span>(<span class="at">year =</span> <span class="dv">2024</span>)</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="co">#&gt; # A tibble: 35 × 4</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co">#&gt;    commodity_year insurance_plan_code insurance_plan                                   insurance_plan_abbrv</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;          &lt;chr&gt;               &lt;chr&gt;                                            &lt;chr&gt;               </span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="co">#&gt;  1 2024           90                  APH                                              APH                 </span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="co">#&gt;  2 2024           91                  APH Price Component                              APHPC               </span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="co">#&gt;  3 2024           43                  Aquaculture Dollar                               AQDOL               </span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="co">#&gt;  4 2024           47                  Actual Revenue History                           ARH                 </span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="co">#&gt;  5 2024           05                  Area Revenue Protection                          ARP                 </span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="co">#&gt;  6 2024           06                  Area Revenue Protection - Harvest Price Exclusi… ARP - HPE           </span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="co">#&gt;  7 2024           04                  Area Yield Protection                            AYP                 </span></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="co">#&gt;  8 2024           50                  Dollar Amount Of Insurance                       DO                  </span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="co">#&gt;  9 2024           83                  Dairy Revenue Protection                         DRP                 </span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a><span class="co">#&gt; 10 2024           88                  Enhanced Cov Opt - Rev Prot                      ECO-RP              </span></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a><span class="co">#&gt; # ℹ 25 more rows</span></span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a><span class="co"># return the insurance plan code for the revenue projection plan</span></span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a><span class="fu">get_insurance_plan_codes</span>(<span class="at">year =</span> <span class="dv">2024</span>, <span class="at">plan =</span> <span class="st">&quot;revenue protection&quot;</span>)</span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 4</span></span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a><span class="co">#&gt;   commodity_year insurance_plan_code insurance_plan     insurance_plan_abbrv</span></span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;          &lt;chr&gt;               &lt;chr&gt;              &lt;chr&gt;               </span></span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a><span class="co">#&gt; 1 2024           02                  Revenue Protection RP</span></span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a></span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a><span class="co"># below are other ways to call the same data</span></span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a><span class="fu">get_insurance_plan_codes</span>(<span class="at">year =</span> <span class="dv">2024</span>, <span class="at">plan =</span> <span class="dv">2</span>)</span>
<span id="cb6-27"><a href="#cb6-27" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 4</span></span>
<span id="cb6-28"><a href="#cb6-28" tabindex="-1"></a><span class="co">#&gt;   commodity_year insurance_plan_code insurance_plan     insurance_plan_abbrv</span></span>
<span id="cb6-29"><a href="#cb6-29" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;          &lt;chr&gt;               &lt;chr&gt;              &lt;chr&gt;               </span></span>
<span id="cb6-30"><a href="#cb6-30" tabindex="-1"></a><span class="co">#&gt; 1 2024           02                  Revenue Protection RP</span></span>
<span id="cb6-31"><a href="#cb6-31" tabindex="-1"></a><span class="fu">get_insurance_plan_codes</span>(<span class="at">year =</span> <span class="dv">2024</span>, <span class="at">plan =</span> <span class="st">&quot;RP&quot;</span>)</span>
<span id="cb6-32"><a href="#cb6-32" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 4</span></span>
<span id="cb6-33"><a href="#cb6-33" tabindex="-1"></a><span class="co">#&gt;   commodity_year insurance_plan_code insurance_plan     insurance_plan_abbrv</span></span>
<span id="cb6-34"><a href="#cb6-34" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;          &lt;chr&gt;               &lt;chr&gt;              &lt;chr&gt;               </span></span>
<span id="cb6-35"><a href="#cb6-35" tabindex="-1"></a><span class="co">#&gt; 1 2024           02                  Revenue Protection RP</span></span>
<span id="cb6-36"><a href="#cb6-36" tabindex="-1"></a><span class="fu">get_insurance_plan_codes</span>(<span class="at">year =</span> <span class="dv">2024</span>, <span class="at">plan =</span> <span class="st">&quot;reVeNue PrOtEcTiOn&quot;</span>)</span>
<span id="cb6-37"><a href="#cb6-37" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 4</span></span>
<span id="cb6-38"><a href="#cb6-38" tabindex="-1"></a><span class="co">#&gt;   commodity_year insurance_plan_code insurance_plan     insurance_plan_abbrv</span></span>
<span id="cb6-39"><a href="#cb6-39" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;          &lt;chr&gt;               &lt;chr&gt;              &lt;chr&gt;               </span></span>
<span id="cb6-40"><a href="#cb6-40" tabindex="-1"></a><span class="co">#&gt; 1 2024           02                  Revenue Protection RP</span></span></code></pre></div>
<p>As was previously stated above, most arguments for the
<code>get_sob_data</code> function are for filtering the returned data.
One exception is the <code>group_by</code> argument which does not
filter the data being returned, but instead alters the level of
aggregation. Taking the above example that returns data for corn in 2022
and setting <code>group_by = &quot;county&quot;</code> will return the same
underlying as above, but decomposed by county.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">get_sob_data</span>(<span class="at">year =</span> <span class="dv">2022</span>, <span class="at">crop =</span> <span class="st">&quot;corn&quot;</span>, <span class="at">group_by =</span> <span class="st">&quot;county&quot;</span>)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2,405 × 27</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="co">#&gt;    commodity_year commodity_code commodity_name        state_code state_abbrv county_code county_name      </span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="co">#&gt;             &lt;dbl&gt;          &lt;int&gt; &lt;chr&gt;                 &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;            </span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="co">#&gt;  1           2022           9999 All Other Commodities 01         AL          999         All Other Counti…</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="co">#&gt;  2           2022           9999 All Other Commodities 01         AL          007         Bibb             </span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="co">#&gt;  3           2022           9999 All Other Commodities 01         AL          013         Butler           </span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="co">#&gt;  4           2022           9999 All Other Commodities 01         AL          023         Choctaw          </span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="co">#&gt;  5           2022           9999 All Other Commodities 01         AL          025         Clarke           </span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="co">#&gt;  6           2022           9999 All Other Commodities 01         AL          027         Clay             </span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="co">#&gt;  7           2022           9999 All Other Commodities 01         AL          029         Cleburne         </span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="co">#&gt;  8           2022           9999 All Other Commodities 01         AL          057         Fayette          </span></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a><span class="co">#&gt;  9           2022           9999 All Other Commodities 01         AL          075         Lamar            </span></span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a><span class="co">#&gt; 10           2022           9999 All Other Commodities 01         AL          093         Marion           </span></span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a><span class="co">#&gt; # ℹ 2,395 more rows</span></span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a><span class="co">#&gt; # ℹ 20 more variables: policies_sold &lt;dbl&gt;, policies_earning_prem &lt;dbl&gt;, policies_indemnified &lt;dbl&gt;,</span></span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a><span class="co">#&gt; #   units_earning_prem &lt;dbl&gt;, units_indemnified &lt;dbl&gt;, quantity &lt;dbl&gt;, quantity_type &lt;chr&gt;,</span></span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a><span class="co">#&gt; #   companion_endorsed_acres &lt;dbl&gt;, liabilities &lt;dbl&gt;, total_prem &lt;dbl&gt;, subsidy &lt;dbl&gt;, indemnity &lt;dbl&gt;,</span></span>
<span id="cb7-19"><a href="#cb7-19" tabindex="-1"></a><span class="co">#&gt; #   efa_prem_discount &lt;dbl&gt;, addnl_subsidy &lt;dbl&gt;, state_subsidy &lt;dbl&gt;, pccp_state_matching_amount &lt;dbl&gt;,</span></span>
<span id="cb7-20"><a href="#cb7-20" tabindex="-1"></a><span class="co">#&gt; #   organic_certified_subsidy_amount &lt;dbl&gt;, organic_transitional_subsidy_amount &lt;dbl&gt;,</span></span>
<span id="cb7-21"><a href="#cb7-21" tabindex="-1"></a><span class="co">#&gt; #   earn_prem_rate &lt;dbl&gt;, loss_ratio &lt;dbl&gt;</span></span></code></pre></div>
<p>We can confirm <code>get_sob_data(year = 2022, crop = &quot;corn&quot;)</code>
and
<code>get_sob_data(year = 2022, crop = &quot;corn&quot;, group_by = &quot;county&quot;)</code>
return the same underlying data by summing up one of individual columns
in the county level data.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>national_data <span class="ot">&lt;-</span> <span class="fu">get_sob_data</span>(<span class="at">year =</span> <span class="dv">2022</span>, <span class="at">crop =</span> <span class="st">&quot;corn&quot;</span>)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;Liabilities from national data: &quot;</span>,<span class="fu">sum</span>(national_data<span class="sc">$</span>liabilities)))</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Liabilities from national data:  67671440421&quot;</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>county_data <span class="ot">&lt;-</span> <span class="fu">get_sob_data</span>(<span class="at">year =</span> <span class="dv">2022</span>, <span class="at">crop =</span> <span class="st">&quot;corn&quot;</span>, <span class="at">group_by =</span> <span class="st">&quot;county&quot;</span>)</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;Liabilities from county data:   &quot;</span>,<span class="fu">sum</span>(county_data<span class="sc">$</span>liabilities)))</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Liabilities from county data:    67671440421&quot;</span></span></code></pre></div>
<p>A unique property of the summary of business data set is that its
continuously updated (one per week) as new information is reported to
USDA by <a href="https://cropinsuranceinamerica.org/who-are-approved-insurance-providers-aips/">approved
insurance providers</a>. This means that analysis using the summary of
business can quickly become outdated. One advantage of the the
<code>rfcip</code> package is that it allows the raw data source to be
directly integrated into the analysis. For example, the chart below
plots indemnities for each crop year from 2015 up to the current year.
The plot will automatically update with the latest data every time the
plot is regenerated. Note that functions in <code>rfcip</code> are <a href="https://en.wikipedia.org/wiki/Memoization">memoised</a> for the
duration of the R session. This means that calling the same function
with the same arguments will return a previously cached data set. In
other words, in the below example, the data would not update if the code
was run multiple times in the same R session, regaurdless of if the
underlying data source changed.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">library</span>(rfcip)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="fu">get_sob_data</span>(<span class="at">year =</span> <span class="dv">2015</span><span class="sc">:</span><span class="fu">as.numeric</span>(<span class="fu">format</span>(<span class="fu">Sys.Date</span>(), <span class="st">&quot;%Y&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="fu">select</span>(commodity_year, indemnity) <span class="sc">%&gt;%</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="fu">group_by</span>(commodity_year) <span class="sc">%&gt;%</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="fu">summarize</span>(<span class="at">indemnity =</span> <span class="fu">sum</span>(indemnity)) <span class="sc">%&gt;%</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">indemnity =</span> indemnity<span class="sc">/</span><span class="dv">1000000000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>  <span class="fu">ggplot</span>(., <span class="fu">aes</span>(<span class="at">y =</span> indemnity, <span class="at">x =</span> commodity_year)) <span class="sc">+</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;firebrick4&quot;</span>) <span class="sc">+</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;USD (Billions)&quot;</span>) <span class="sc">+</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="fu">paste0</span>(<span class="st">&quot;FCIP Indemnities by Year: 2015 - &quot;</span>,<span class="fu">format</span>(<span class="fu">Sys.Date</span>(), <span class="st">&quot;%Y&quot;</span>))) <span class="sc">+</span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<div class="float">
<img role="img" aria-label="plot of chunk sob-method-chaining" src="figures/rfcip-introduction/sob-method-chaining-1.png" alt="plot of chunk sob-method-chaining" />
<div class="figcaption">plot of chunk sob-method-chaining</div>
</div>
<div id="summary-of-business-by-type-practice-and-unit-structure" class="section level3">
<h3>Summary of Business by Type, Practice, and Unit Structure</h3>
<p>The default behavior of the <code>get_sob_data()</code>function is to
pull data from <a href="https://public-rma.fpac.usda.gov/apps/SummaryOfBusiness/ReportGenerator">RMA’s
summary of business report generator</a>. Although this allows for
server side filtering of data before it gets to your local machine it
does not allow access to the most granular version of the data know as
the <a href="https://www.rma.usda.gov/tools-reports/summary-of-business/state-county-crop-summary-business">Summary
of Business by Type, Practice, and Unit Structure</a>. By setting the
optional parameter <code>sob_version = &quot;sobtpu&quot;</code> the behavior of
the <code>get_sob_data()</code> function will change to pull data from
the <a href="https://www.rma.usda.gov/tools-reports/summary-of-business/state-county-crop-summary-business">Summary
of Business by Type, Practice, and Unit Structure</a>. Note that when
<code>sob_version = &quot;sobtpu&quot;</code>, the arguments
<code>delivery_type</code>, <code>comm_cat</code>, and
<code>group_by</code> are not applicable and will be ignored. Otherwise,
the function behaves the same as when <code>sob_version = &quot;sob&quot;</code>
(the default).</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># get the summary of business by type, practice, and unit structure</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">get_sob_data</span>(<span class="at">year =</span> <span class="dv">2022</span>, <span class="at">crop =</span> <span class="st">&quot;corn&quot;</span>, <span class="at">sob_version =</span> <span class="st">&quot;sobtpu&quot;</span>)</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="fu">head</span>(data)</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="co">#&gt;   commodity_year state_code state_name state_abbreviation county_code county_name commodity_code</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="co">#&gt; 1           2022          1    Alabama                 AL           1     Autauga             41</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="co">#&gt; 2           2022          1    Alabama                 AL           1     Autauga             41</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="co">#&gt; 3           2022          1    Alabama                 AL           1     Autauga             41</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a><span class="co">#&gt; 4           2022          1    Alabama                 AL           1     Autauga             41</span></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="co">#&gt; 5           2022          1    Alabama                 AL           1     Autauga             41</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a><span class="co">#&gt; 6           2022          1    Alabama                 AL           1     Autauga             41</span></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a><span class="co">#&gt;   commodity_name insurance_plan_code insurance_plan_abbreviation coverage_type_code coverage_level_percent</span></span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a><span class="co">#&gt; 1           Corn                   1                          YP                  C                   0.50</span></span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a><span class="co">#&gt; 2           Corn                   2                          RP                  A                   0.60</span></span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a><span class="co">#&gt; 3           Corn                   2                          RP                  A                   0.65</span></span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a><span class="co">#&gt; 4           Corn                   2                          RP                  A                   0.70</span></span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a><span class="co">#&gt; 5           Corn                   2                          RP                  A                   0.70</span></span>
<span id="cb10-18"><a href="#cb10-18" tabindex="-1"></a><span class="co">#&gt; 6           Corn                   2                          RP                  A                   0.70</span></span>
<span id="cb10-19"><a href="#cb10-19" tabindex="-1"></a><span class="co">#&gt;   delivery_id type_code         type_name practice_code         practice_name unit_structure_code</span></span>
<span id="cb10-20"><a href="#cb10-20" tabindex="-1"></a><span class="co">#&gt; 1           R         0 No Type Specified             0 No Practice Specified                  OU</span></span>
<span id="cb10-21"><a href="#cb10-21" tabindex="-1"></a><span class="co">#&gt; 2           R        16             Grain             3         Non-Irrigated                  BU</span></span>
<span id="cb10-22"><a href="#cb10-22" tabindex="-1"></a><span class="co">#&gt; 3           R         0 No Type Specified             0 No Practice Specified                  OU</span></span>
<span id="cb10-23"><a href="#cb10-23" tabindex="-1"></a><span class="co">#&gt; 4           R         0 No Type Specified             0 No Practice Specified                  OU</span></span>
<span id="cb10-24"><a href="#cb10-24" tabindex="-1"></a><span class="co">#&gt; 5           R        16             Grain             2             Irrigated                  OU</span></span>
<span id="cb10-25"><a href="#cb10-25" tabindex="-1"></a><span class="co">#&gt; 6           R        16             Grain             3         Non-Irrigated                  OU</span></span>
<span id="cb10-26"><a href="#cb10-26" tabindex="-1"></a><span class="co">#&gt;   unit_structure_name net_reporting_level_amount reporting_level_type liability_amount</span></span>
<span id="cb10-27"><a href="#cb10-27" tabindex="-1"></a><span class="co">#&gt; 1       Optional Unit                          0                Acres                0</span></span>
<span id="cb10-28"><a href="#cb10-28" tabindex="-1"></a><span class="co">#&gt; 2          Basic Unit                         76                Acres            33327</span></span>
<span id="cb10-29"><a href="#cb10-29" tabindex="-1"></a><span class="co">#&gt; 3       Optional Unit                          0                Acres                0</span></span>
<span id="cb10-30"><a href="#cb10-30" tabindex="-1"></a><span class="co">#&gt; 4       Optional Unit                          0                Acres                0</span></span>
<span id="cb10-31"><a href="#cb10-31" tabindex="-1"></a><span class="co">#&gt; 5       Optional Unit                        355                Acres           319499</span></span>
<span id="cb10-32"><a href="#cb10-32" tabindex="-1"></a><span class="co">#&gt; 6       Optional Unit                         51                Acres            21822</span></span>
<span id="cb10-33"><a href="#cb10-33" tabindex="-1"></a><span class="co">#&gt;   total_premium_amount subsidy_amount indemnity_amount loss_ratio</span></span>
<span id="cb10-34"><a href="#cb10-34" tabindex="-1"></a><span class="co">#&gt; 1                    0              0                0       0.00</span></span>
<span id="cb10-35"><a href="#cb10-35" tabindex="-1"></a><span class="co">#&gt; 2                 3520           2253                0       0.00</span></span>
<span id="cb10-36"><a href="#cb10-36" tabindex="-1"></a><span class="co">#&gt; 3                    0              0                0       0.00</span></span>
<span id="cb10-37"><a href="#cb10-37" tabindex="-1"></a><span class="co">#&gt; 4                    0              0                0       0.00</span></span>
<span id="cb10-38"><a href="#cb10-38" tabindex="-1"></a><span class="co">#&gt; 5                22646          13361            81213       3.59</span></span>
<span id="cb10-39"><a href="#cb10-39" tabindex="-1"></a><span class="co">#&gt; 6                 4094           2416            11644       2.84</span></span>
<span id="cb10-40"><a href="#cb10-40" tabindex="-1"></a><span class="co">#&gt;   endorsed_commodity_reporting_level_amount</span></span>
<span id="cb10-41"><a href="#cb10-41" tabindex="-1"></a><span class="co">#&gt; 1                                         0</span></span>
<span id="cb10-42"><a href="#cb10-42" tabindex="-1"></a><span class="co">#&gt; 2                                         0</span></span>
<span id="cb10-43"><a href="#cb10-43" tabindex="-1"></a><span class="co">#&gt; 3                                         0</span></span>
<span id="cb10-44"><a href="#cb10-44" tabindex="-1"></a><span class="co">#&gt; 4                                         0</span></span>
<span id="cb10-45"><a href="#cb10-45" tabindex="-1"></a><span class="co">#&gt; 5                                         0</span></span>
<span id="cb10-46"><a href="#cb10-46" tabindex="-1"></a><span class="co">#&gt; 6                                         0</span></span></code></pre></div>
<p>Once consideration when using <code>sob_version = &quot;sobtpu&quot;</code> is
that the data is only accessible via bulk download by year. This means
there will be little to no performance advantage from filtering data via
the function arguments since the full data set must be downloaded before
the filters are applied. However, the function does apply the filters to
each year-specific file as they are read in to minimize memory usage to
the extent possible.</p>
</div>
</div>
<div id="cause-of-loss-files" class="section level2">
<h2>Cause of Loss Files</h2>
<p>Although RMA’s <a href="https://www.rma.usda.gov/tools-reports/summary-of-business">Summary
of Business</a> files do report indemnities, they don’t report the cause
of loss associated with the indemnities which is often relevant. To
obtain indemnities with the associated cause of loss that generated
those indemnities, accessing the <a href="https://www.rma.usda.gov/tools-reports/summary-business/cause-loss">cause
of loss files</a> is necessary. Unlike data contained in the <a href="https://www.rma.usda.gov/tools-reports/summary-of-business">summary
of Business</a>, the <a href="https://www.rma.usda.gov/tools-reports/summary-business/cause-loss">cause
of loss files</a> can only be accessed by bulk downloading all data for
a particular year. Because of this, the cause of loss data cannot be
filtered prior to loading it into local memory meaning there is no
advantage to offering any within-function filtering options. To download
<a href="https://www.rma.usda.gov/tools-reports/summary-business/cause-loss">cause
of loss files</a> for a year or series of years, use the
<code>get_col_data</code> function. The function will automatically
download all the relevant cause of loss files and merge them into a
single data frame that will be returned.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>col_data <span class="ot">&lt;-</span> <span class="fu">get_col_data</span>(<span class="at">year =</span> <span class="dv">2020</span><span class="sc">:</span><span class="dv">2022</span>)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="fu">head</span>(col_data)</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="co">#&gt;   commodity_year state_code state_abbrv county_code county_name commodity_code commodity_name</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="co">#&gt; 1           2020          1          AL           1     Autauga             21         Cotton</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="co">#&gt; 2           2020          1          AL           1     Autauga             21         Cotton</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="co">#&gt; 3           2020          1          AL           1     Autauga             21         Cotton</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="co">#&gt; 4           2020          1          AL           1     Autauga             41           Corn</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="co">#&gt; 5           2020          1          AL           1     Autauga             41           Corn</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="co">#&gt; 6           2020          1          AL           1     Autauga             41           Corn</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="co">#&gt;   insurance_plan_code insurance_plan_abbrv delivery_type stage_code col_code</span></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="co">#&gt; 1                   2                   RP             A          H       31</span></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a><span class="co">#&gt; 2                   2                   RP             A          H       92</span></span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a><span class="co">#&gt; 3                   2                   RP             A          H       92</span></span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a><span class="co">#&gt; 4                   2                   RP             A          H        1</span></span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a><span class="co">#&gt; 5                   2                   RP             A          H       11</span></span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a><span class="co">#&gt; 6                   2                   RP             A          R       93</span></span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a><span class="co">#&gt;                             col_name month_of_loss_code month_of_loss_name year_of_loss</span></span>
<span id="cb11-18"><a href="#cb11-18" tabindex="-1"></a><span class="co">#&gt; 1 Excess Moisture/Precipitation/Rain                  9                SEP         2020</span></span>
<span id="cb11-19"><a href="#cb11-19" tabindex="-1"></a><span class="co">#&gt; 2      Hurricane/Tropical Depression                 10                OCT         2020</span></span>
<span id="cb11-20"><a href="#cb11-20" tabindex="-1"></a><span class="co">#&gt; 3      Hurricane/Tropical Depression                  9                SEP         2020</span></span>
<span id="cb11-21"><a href="#cb11-21" tabindex="-1"></a><span class="co">#&gt; 4                   Decline in Price                  9                SEP         2020</span></span>
<span id="cb11-22"><a href="#cb11-22" tabindex="-1"></a><span class="co">#&gt; 5                            Drought                  7                JUL         2020</span></span>
<span id="cb11-23"><a href="#cb11-23" tabindex="-1"></a><span class="co">#&gt; 6                           Wildlife                  5                MAY         2020</span></span>
<span id="cb11-24"><a href="#cb11-24" tabindex="-1"></a><span class="co">#&gt;   policies_earning_prem policies_indemnified net_planted_qty net_endorsed_acres  liability total_premium</span></span>
<span id="cb11-25"><a href="#cb11-25" tabindex="-1"></a><span class="co">#&gt; 1                     1                    1          38.925                  0  11519.000      1389.000</span></span>
<span id="cb11-26"><a href="#cb11-26" tabindex="-1"></a><span class="co">#&gt; 2                     3                    3         992.425                  0 495420.000     38585.500</span></span>
<span id="cb11-27"><a href="#cb11-27" tabindex="-1"></a><span class="co">#&gt; 3                     3                    3         392.600                  0 220061.000     17815.500</span></span>
<span id="cb11-28"><a href="#cb11-28" tabindex="-1"></a><span class="co">#&gt; 4                     1                    1          12.900                  0   2543.665       437.095</span></span>
<span id="cb11-29"><a href="#cb11-29" tabindex="-1"></a><span class="co">#&gt; 5                     1                    1           8.100                  0   1597.185       274.455</span></span>
<span id="cb11-30"><a href="#cb11-30" tabindex="-1"></a><span class="co">#&gt; 6                     1                    1          30.000                  0   5915.500      1016.500</span></span>
<span id="cb11-31"><a href="#cb11-31" tabindex="-1"></a><span class="co">#&gt;   producer_paid_premium  subsidy state_subsidy addnl_subsidy efa_prem_discount indemnified_quantity</span></span>
<span id="cb11-32"><a href="#cb11-32" tabindex="-1"></a><span class="co">#&gt; 1               570.000   819.00             0             0                 0               38.925</span></span>
<span id="cb11-33"><a href="#cb11-33" tabindex="-1"></a><span class="co">#&gt; 2              8457.500 30128.00             0             0                 0              992.425</span></span>
<span id="cb11-34"><a href="#cb11-34" tabindex="-1"></a><span class="co">#&gt; 3              4157.500 13658.00             0             0                 0              392.600</span></span>
<span id="cb11-35"><a href="#cb11-35" tabindex="-1"></a><span class="co">#&gt; 4               196.725   240.37             0             0                 0               25.800</span></span>
<span id="cb11-36"><a href="#cb11-36" tabindex="-1"></a><span class="co">#&gt; 5               123.525   150.93             0             0                 0               16.200</span></span>
<span id="cb11-37"><a href="#cb11-37" tabindex="-1"></a><span class="co">#&gt; 6               457.500   559.00             0             0                 0               14.000</span></span>
<span id="cb11-38"><a href="#cb11-38" tabindex="-1"></a><span class="co">#&gt;   indem_amount loss_ratio</span></span>
<span id="cb11-39"><a href="#cb11-39" tabindex="-1"></a><span class="co">#&gt; 1      1938.00       1.40</span></span>
<span id="cb11-40"><a href="#cb11-40" tabindex="-1"></a><span class="co">#&gt; 2     95015.00       2.46</span></span>
<span id="cb11-41"><a href="#cb11-41" tabindex="-1"></a><span class="co">#&gt; 3     18962.00       1.06</span></span>
<span id="cb11-42"><a href="#cb11-42" tabindex="-1"></a><span class="co">#&gt; 4      1602.18       3.67</span></span>
<span id="cb11-43"><a href="#cb11-43" tabindex="-1"></a><span class="co">#&gt; 5      1006.02       3.67</span></span>
<span id="cb11-44"><a href="#cb11-44" tabindex="-1"></a><span class="co">#&gt; 6       439.00       0.43</span></span></code></pre></div>
</div>
<div id="price" class="section level2">
<h2>Price</h2>
<p>Insurance guarantees and indemnities for revenue protection plans are
base, in part, on projected commodity prices and harvest commodity
prices. These are available via RMA’s <a href="https://public-rma.fpac.usda.gov/apps/PriceDiscovery/">price
discovery application</a>, but can also be obtained using the
<code>get_price_data</code> function which supports arguments for
<code>year</code>, <code>crop</code>, and <code>state</code>. For
example, prices for corn in Illinois from 2020-2024 can be obtained with
the following code.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>price_data <span class="ot">&lt;-</span> <span class="fu">get_price_data</span>(<span class="at">year =</span> <span class="dv">2020</span><span class="sc">:</span><span class="dv">2024</span>,</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>                             <span class="at">crop =</span> <span class="st">&quot;corn&quot;</span>,</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>                             <span class="at">state =</span> <span class="st">&quot;IL&quot;</span>)</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="fu">head</span>(price_data) </span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 38</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="co">#&gt;   CommodityYear CommodityCode CommodityName TypeCode TypeName PracticeCode PracticeName StateCode StateName</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="co">#&gt;           &lt;int&gt;         &lt;int&gt; &lt;chr&gt;            &lt;int&gt; &lt;chr&gt;           &lt;int&gt; &lt;chr&gt;            &lt;int&gt; &lt;chr&gt;    </span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="co">#&gt; 1          2020            41 Corn                16 High Am…            2 Conventional        17 Illinois </span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="co">#&gt; 2          2020            41 Corn                16 High Am…            3 Organic             17 Illinois </span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a><span class="co">#&gt; 3          2020            41 Corn                17 All (No…            2 Conventional        17 Illinois </span></span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a><span class="co">#&gt; 4          2020            41 Corn                17 All (No…            3 Organic             17 Illinois </span></span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a><span class="co">#&gt; 5          2021            41 Corn                16 High Am…            2 Conventional        17 Illinois </span></span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a><span class="co">#&gt; 6          2021            41 Corn                16 High Am…            3 Organic             17 Illinois </span></span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a><span class="co">#&gt; # ℹ 29 more variables: PriceMultiplicativeFactor &lt;dbl&gt;, PriceAdditiveFactor &lt;dbl&gt;,</span></span>
<span id="cb12-16"><a href="#cb12-16" tabindex="-1"></a><span class="co">#&gt; #   ProjectedPriceExchangeCode &lt;chr&gt;, ProjectedPriceMarketSymbolCode &lt;chr&gt;,</span></span>
<span id="cb12-17"><a href="#cb12-17" tabindex="-1"></a><span class="co">#&gt; #   ProjectedPricePreviousMarketSymbolCode &lt;chr&gt;, ProjectedPriceCurrencyMarketSymbolCode &lt;lgl&gt;,</span></span>
<span id="cb12-18"><a href="#cb12-18" tabindex="-1"></a><span class="co">#&gt; #   ProjectedPriceBeginDate &lt;dttm&gt;, ProjectedPriceEndDate &lt;dttm&gt;, ProjectedPriceDateRange &lt;chr&gt;,</span></span>
<span id="cb12-19"><a href="#cb12-19" tabindex="-1"></a><span class="co">#&gt; #   ProjectedPrice &lt;dbl&gt;, ApprovedPriceVolatilityPercent &lt;dbl&gt;, HarvestPriceExchangeCode &lt;chr&gt;,</span></span>
<span id="cb12-20"><a href="#cb12-20" tabindex="-1"></a><span class="co">#&gt; #   HarvestPriceMarketSymbolCode &lt;chr&gt;, HarvestPriceCurrencyMarketSymbolCode &lt;lgl&gt;,</span></span>
<span id="cb12-21"><a href="#cb12-21" tabindex="-1"></a><span class="co">#&gt; #   HarvestPriceBeginDate &lt;dttm&gt;, HarvestPriceEndDate &lt;dttm&gt;, HarvestPriceDateRange &lt;chr&gt;, …</span></span></code></pre></div>
</div>
<div id="reinsurance-agreements" class="section level2">
<h2>Reinsurance Agreements</h2>
<div id="standard-reinsurance-agreement" class="section level3">
<h3>Standard Reinsurance Agreement</h3>
<p>Data related to the Standard Reinsurance Agreement (including
retained liabilities, premiums, indemnities, and net underwriting gains
and losses) is included as a static internal data set. To load the
national level data set, use <code>data(nationalSRA)</code>. This data
set is based on data from RMA’s <a href="https://www.rma.usda.gov/tools-reports/reinsurance-reports">reinsurance
reports</a>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co"># load the national SRA data set</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="fu">data</span>(nationalSRA)</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="fu">head</span>(nationalSRA)</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 11</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="co">#&gt;   fund_abb reinsurance_year report_geography value_type        dollars data_release_month data_release_year</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;               &lt;dbl&gt;              &lt;dbl&gt;             &lt;dbl&gt;</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="co">#&gt; 1 AR                   1998 NationalFund     gross_liability    3.29e9                  2              2002</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="co">#&gt; 2 AR                   1998 NationalFund     gross_premium      3.14e8                  2              2002</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="co">#&gt; 3 AR                   1998 NationalFund     gross_indemnity    4.63e8                  2              2002</span></span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a><span class="co">#&gt; 4 AR                   1998 NationalFund     retained_liabili…  5.97e8                  2              2002</span></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a><span class="co">#&gt; 5 AR                   1998 NationalFund     retained_premium   5.85e7                  2              2002</span></span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a><span class="co">#&gt; 6 AR                   1998 NationalFund     retained_indemni…  5.18e7                  2              2002</span></span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a><span class="co">#&gt; # ℹ 4 more variables: data_release_day &lt;dbl&gt;, data_release_date &lt;date&gt;, fund_name &lt;chr&gt;, report_type &lt;chr&gt;</span></span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a></span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a><span class="co"># pull up the data sets documentation file.</span></span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a>?nationalSRA</span></code></pre></div>
<p>Similarly, a state level version of the SRA data set is also
available. To load the state level data set, use
<code>data(stateSRA)</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co"># load the state SRA data set</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="fu">data</span>(stateSRA)</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="fu">head</span>(stateSRA)</span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 12</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="co">#&gt;   state fund_abb reinsurance_year report_geography value_type  dollars data_release_month data_release_year</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;               &lt;int&gt; &lt;chr&gt;            &lt;chr&gt;         &lt;dbl&gt;              &lt;dbl&gt;             &lt;dbl&gt;</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a><span class="co">#&gt; 1 AL    AR                   1998 StateFund        gross_liab…  6.35e7                  2              2002</span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="co">#&gt; 2 AL    AR                   1998 StateFund        gross_prem…  7.15e6                  2              2002</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a><span class="co">#&gt; 3 AL    AR                   1998 StateFund        gross_inde…  1.64e7                  2              2002</span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="co">#&gt; 4 AL    AR                   1998 StateFund        retained_l…  1.27e7                  2              2002</span></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a><span class="co">#&gt; 5 AL    AR                   1998 StateFund        retained_p…  1.43e6                  2              2002</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a><span class="co">#&gt; 6 AL    AR                   1998 StateFund        retained_i…  1.51e6                  2              2002</span></span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a><span class="co">#&gt; # ℹ 4 more variables: data_release_day &lt;dbl&gt;, data_release_date &lt;date&gt;, fund_name &lt;chr&gt;, report_type &lt;chr&gt;</span></span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a></span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a><span class="co"># pull up the data sets documentation file.</span></span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a>?stateSRA</span></code></pre></div>
</div>
<div id="livestock-price-reinsurance-agreement" class="section level3">
<h3>Livestock Price Reinsurance Agreement</h3>
<p>Data related to the Livestock Price Reinsurance Agreement (including
retained liabilities, premiums, indemnities, and net underwriting gains
and losses) is included as a static internal data set. To load the
national level data set, use <code>data(nationalLPRA)</code>. This data
set is based on data from <a href="https://www.rma.usda.gov/tools-reports/reinsurance-reports">reinsurance
reports</a>.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co"># load the national SRA data set</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="fu">data</span>(nationalLPRA)</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="fu">head</span>(nationalLPRA)</span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 10</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="co">#&gt;   reinsurance_year report_geography footnote        value_type dollars data_release_month data_release_year</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="co">#&gt;              &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;           &lt;chr&gt;        &lt;dbl&gt;              &lt;dbl&gt;             &lt;dbl&gt;</span></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a><span class="co">#&gt; 1             2014 NationalFund     &quot;Footnote: Amo… gross_lia…  1.04e9                 10              2018</span></span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a><span class="co">#&gt; 2             2014 NationalFund     &quot;Footnote: Amo… gross_pre…  2.28e7                 10              2018</span></span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a><span class="co">#&gt; 3             2014 NationalFund     &quot;Footnote: Amo… gross_ind…  1.05e7                 10              2018</span></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a><span class="co">#&gt; 4             2014 NationalFund     &quot;Footnote: Amo… retained_…  4.03e8                 10              2018</span></span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a><span class="co">#&gt; 5             2014 NationalFund     &quot;Footnote: Amo… retained_…  8.64e6                 10              2018</span></span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a><span class="co">#&gt; 6             2014 NationalFund     &quot;Footnote: Amo… retained_…  3.69e6                 10              2018</span></span>
<span id="cb15-14"><a href="#cb15-14" tabindex="-1"></a><span class="co">#&gt; # ℹ 3 more variables: data_release_day &lt;dbl&gt;, data_release_date &lt;date&gt;, report_type &lt;chr&gt;</span></span>
<span id="cb15-15"><a href="#cb15-15" tabindex="-1"></a></span>
<span id="cb15-16"><a href="#cb15-16" tabindex="-1"></a><span class="co"># pull up the data sets documentation file.</span></span>
<span id="cb15-17"><a href="#cb15-17" tabindex="-1"></a>?nationalLPRA</span></code></pre></div>
<p>Please note that <code>rfcip</code> is released with a <a href="https://ropensci.org/code-of-conduct/#:~:text=rOpenSci%20is%20committed%20to%20providing,understand%E2%80%9D%20or%20%E2%80%9CWhy%E2%80%9D.">Contributor
Code of Conduct</a>. By contributing to the package you agree to abide
by its terms.</p>
</div>
</div>
<div id="livestock-and-dairy-participation-reports" class="section level2">
<h2>Livestock and Dairy Participation Reports</h2>
<p>Some data on participation in livestock insurance plans can be
retrieved using the <code>get_sob_data</code> function, however, more
detailed information is available from the <a href="https://www.rma.usda.gov/tools-reports/summary-of-business/livestock-dairy-participation">Livestock
and Dairy Participation</a> reports. The <code>get_livestock_data</code>
function can be used to download the most recent versions of the data
contained there.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="co"># get data on the livestock risk protection plan from 2020 to 2022</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>lrp_data <span class="ot">&lt;-</span> <span class="fu">get_livestock_data</span>(<span class="at">year =</span> <span class="dv">2020</span><span class="sc">:</span><span class="dv">2022</span>, <span class="at">program =</span> <span class="st">&quot;LRP&quot;</span>)</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="co"># get data on the  dairy revenue protection plan from 2020 to 2022</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>drp_data <span class="ot">&lt;-</span> <span class="fu">get_livestock_data</span>(<span class="at">year =</span> <span class="dv">2020</span><span class="sc">:</span><span class="dv">2022</span>, <span class="at">program =</span> <span class="st">&quot;DRP&quot;</span>)</span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a><span class="co"># get data on the livestock gross margin plan from 2020 to 2022</span></span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a>lgm_data <span class="ot">&lt;-</span> <span class="fu">get_livestock_data</span>(<span class="at">year =</span> <span class="dv">2020</span><span class="sc">:</span><span class="dv">2022</span>, <span class="at">program =</span> <span class="st">&quot;LGM&quot;</span>)</span></code></pre></div>
</div>
<div id="actuarial-data-master-adm" class="section level2">
<h2>Actuarial Data Master (ADM)</h2>
<p>RMA’s <a href="https://pubfs-rma.fpac.usda.gov/pub/References/actuarial_data_master/">Actuarial
Data Master (ADM)</a> contains the detailed actuarial data that
underlies crop insurance rate-making and premium calculations. This data
includes base rates, price discovery information, subsidy schedules, and
reference information for all crops, counties, and insurance plans
offered through the Federal Crop Insurance Program. Although publicly
available, the data is difficult to access primarily due to the size of
the raw files which overwhelms the memory on typical hardware. The
<code>rfcip</code> package addresses this by pre-procssing the ADM data
into smaller, more manageable data sets and applying compression
techniques to reduce to total file size. The <code>get_adm_data()</code>
function provides access to these processed ADM datasets which are
stored as a <a href="https://github.com/dylan-turner25/rfcip/releases">GitHub
release</a>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">library</span>(rfcip)</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="co"># Get base rate data for 2020</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>baserate_2020 <span class="ot">&lt;-</span> <span class="fu">get_adm_data</span>(<span class="at">year =</span> <span class="dv">2020</span>, <span class="at">dataset =</span> <span class="st">&quot;baserate&quot;</span>)</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="co"># Get price data for 2018</span></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>price_2018 <span class="ot">&lt;-</span> <span class="fu">get_adm_data</span>(<span class="at">year =</span> <span class="dv">2018</span>, <span class="at">dataset =</span> <span class="st">&quot;price&quot;</span>)</span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a><span class="co"># Get subsidy data for multiple years</span></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a>subsidy_multi <span class="ot">&lt;-</span> <span class="fu">get_adm_data</span>(<span class="at">year =</span> <span class="fu">c</span>(<span class="dv">2018</span>, <span class="dv">2019</span>, <span class="dv">2020</span>), <span class="at">dataset =</span> <span class="st">&quot;subsidypercent&quot;</span>)</span></code></pre></div>
<p>The function is case-insensitive for dataset names and can use either
the descriptive name or the record code. All of the following return the
same data:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="co"># These all return the same BaseRate data for 2020</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="fu">get_adm_data</span>(<span class="at">year =</span> <span class="dv">2020</span>, <span class="at">dataset =</span> <span class="st">&quot;BaseRate&quot;</span>)</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="fu">get_adm_data</span>(<span class="at">year =</span> <span class="dv">2020</span>, <span class="at">dataset =</span> <span class="st">&quot;base_RaTe&quot;</span>)  </span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="fu">get_adm_data</span>(<span class="at">year =</span> <span class="dv">2020</span>, <span class="at">dataset =</span> <span class="st">&quot;A01010&quot;</span>)</span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="fu">get_adm_data</span>(<span class="at">year =</span> <span class="dv">2020</span>, <span class="at">dataset =</span> <span class="st">&quot;a01010&quot;</span>)</span></code></pre></div>
<div id="available-datasets" class="section level3">
<h3>Available Datasets</h3>
<p>The package provides access to multiple ADM datasets across years
2011-2026. The datasets are organized into three categories:</p>
<div id="core-actuarial-datasets" class="section level4">
<h4>Core Actuarial Datasets</h4>
<ul>
<li><strong>BaseRate (A01010)</strong>: Base rates for crop insurance
premiums</li>
<li><strong>Price (A00810)</strong>: Commodity prices (established,
projected, harvest)</li>
<li><strong>SubsidyPercent (A00070)</strong>: Premium subsidy
percentages by coverage level</li>
<li><strong>InsuranceOffer (A00030)</strong>: Insurance offer
information and coverage details</li>
<li><strong>Beta (A01020)</strong>: Beta risk adjustment factors for
rate calculations</li>
<li><strong>ComboRevenueFactor (A01030)</strong>: Combined revenue
factors for revenue insurance</li>
<li><strong>CoverageLevelDifferential (A01040)</strong>: Coverage level
rate differentials</li>
<li><strong>HistoricalRevenueCapping (A01110)</strong>: Historical
revenue capping data</li>
<li><strong>HistoricalYieldTrend (A01115)</strong>: Historical yield
trend data (2016+)</li>
<li><strong>AreaCoverageLevel (A01130)</strong>: Area coverage levels
(2017+)</li>
<li><strong>AreaRate (A01135)</strong>: Area rates for county-level
coverage (2017+)</li>
<li><strong>AreaRiskRate (A01005)</strong>: Area risk rates
(2011-2016)</li>
<li><strong>UnitDiscount (A01090)</strong>: Unit discount factors</li>
</ul>
</div>
<div id="reference-datasets" class="section level4">
<h4>Reference Datasets</h4>
<ul>
<li><strong>Date (A00200)</strong>: Important dates for crop insurance
(sales closing, etc.)</li>
<li><strong>Commodity (A00420)</strong>: Commodity codes and
descriptions</li>
<li><strong>CommodityType (A00430)</strong>: Commodity type
classifications</li>
<li><strong>County (A00440)</strong>: County codes and names</li>
<li><strong>InsurancePlan (A00460)</strong>: Insurance plan codes and
descriptions</li>
<li><strong>IrrigationPractice (A00490)</strong>: Irrigation practice
codes</li>
<li><strong>OrganicPractice (A00500)</strong>: Organic practice
designations</li>
<li><strong>Practice (A00510)</strong>: Practice codes and
descriptions</li>
<li><strong>State (A00520)</strong>: State codes and names</li>
<li><strong>Type (A00540)</strong>: Crop type codes and
descriptions</li>
</ul>
</div>
</div>
</div>
</div>
<div id="caching-and-performance" class="section level1">
<h1>Caching and Performance</h1>
<p>The <code>rfcip</code> package implements a caching system designed
to minimizing redundant data downloads. This system combines
session-level memoization with disk caching to provide performance
benefits and reduce host server load.</p>
<div id="how-caching-works" class="section level2">
<h2>How Caching Works</h2>
<div id="two-tier-caching-system" class="section level3">
<h3>Two-Tier Caching System</h3>
<ol style="list-style-type: decimal">
<li><p><strong>Session-Level Memoization</strong>: All data functions
are memoized using the <code>memoise</code> package, meaning that
repeated calls with identical arguments within the same R session return
cached results immediately without any disk I/O.</p></li>
<li><p><strong>Persistent Disk Caching</strong>: Downloaded data is
cached to disk in the package’s installed location (view that location
using <code>tools::R_user_dir(&quot;rfcip&quot;, &quot;cache&quot;)</code> ).</p></li>
</ol>
<p>The caching system handles partial data requests. For example, if you
previously downloaded data for 2020-2022 and later request 2020-2023,
the system will: - Load 2020-2022 data from cache - Only download the
new 2023 data - Combine both cached and fresh data in the returned
data</p>
<p>Below is a demonstration of the performance increases that come from
caching the data.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="fu">library</span>(rfcip)</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="co"># First call - downloads and caches data (will take several seconds)</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="fu">system.time</span>({</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>  col_data1 <span class="ot">&lt;-</span> <span class="fu">get_col_data</span>(<span class="at">year =</span> <span class="dv">2020</span><span class="sc">:</span><span class="dv">2022</span>)</span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>})</span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a><span class="co">#   user  system elapsed </span></span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a><span class="co">#  2.156   0.234  15.423 </span></span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a></span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a><span class="co"># Subsequent call - loads from cache (much faster!)</span></span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a><span class="fu">system.time</span>({</span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a>  col_data2 <span class="ot">&lt;-</span> <span class="fu">get_col_data</span>(<span class="at">year =</span> <span class="dv">2020</span><span class="sc">:</span><span class="dv">2022</span>)</span>
<span id="cb19-13"><a href="#cb19-13" tabindex="-1"></a>})</span>
<span id="cb19-14"><a href="#cb19-14" tabindex="-1"></a><span class="co">#   user  system elapsed </span></span>
<span id="cb19-15"><a href="#cb19-15" tabindex="-1"></a><span class="co">#  0.023   0.008   0.156 </span></span>
<span id="cb19-16"><a href="#cb19-16" tabindex="-1"></a></span>
<span id="cb19-17"><a href="#cb19-17" tabindex="-1"></a><span class="co"># Verify data is identical</span></span>
<span id="cb19-18"><a href="#cb19-18" tabindex="-1"></a><span class="fu">identical</span>(col_data1, col_data2)</span>
<span id="cb19-19"><a href="#cb19-19" tabindex="-1"></a><span class="co"># [1] TRUE</span></span></code></pre></div>
<p>Since the above example already downloaded data for 2020 - 2022, the
following only downloads 2023 data.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="co"># Request additional year - only downloads 2023, loads 2020-2022 from cache</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>col_data3 <span class="ot">&lt;-</span> <span class="fu">get_col_data</span>(<span class="at">year =</span> <span class="dv">2020</span><span class="sc">:</span><span class="dv">2023</span>)</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="co"># The function automatically:</span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a><span class="co"># 1. Identifies that 2020-2022 are already cached</span></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a><span class="co"># 2. Loads cached data for these years</span></span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a><span class="co"># 3. Downloads only the missing 2023 data</span></span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a><span class="co"># 4. Combines all data into a single data frame</span></span></code></pre></div>
<p>Functions that utilize server-side data processing use the unique
parameters of the function call to create unique cache entries. This
means that different parameters will result in different cache
entries.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="co"># These create separate cache entries due to different parameters</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>price_data_corn <span class="ot">&lt;-</span> <span class="fu">get_price_data</span>(<span class="at">year =</span> <span class="dv">2023</span>, <span class="at">crop =</span> <span class="st">&quot;corn&quot;</span>, <span class="at">state =</span> <span class="st">&quot;IL&quot;</span>)</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>price_data_soy <span class="ot">&lt;-</span> <span class="fu">get_price_data</span>(<span class="at">year =</span> <span class="dv">2023</span>, <span class="at">crop =</span> <span class="st">&quot;soybeans&quot;</span>, <span class="at">state =</span> <span class="st">&quot;IL&quot;</span>)</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>price_data_ia <span class="ot">&lt;-</span> <span class="fu">get_price_data</span>(<span class="at">year =</span> <span class="dv">2023</span>, <span class="at">crop =</span> <span class="st">&quot;corn&quot;</span>, <span class="at">state =</span> <span class="st">&quot;IA&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="force-parameter-and-cache-refresh" class="section level2">
<h2>Force Parameter and Cache Refresh</h2>
<p>All caching functions include a <code>force</code> parameter for
refreshing cached data.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="co"># Force refresh - attempts fresh download, falls back to cache on failure</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>col_data_fresh <span class="ot">&lt;-</span> <span class="fu">get_col_data</span>(<span class="at">year =</span> <span class="dv">2020</span><span class="sc">:</span><span class="dv">2022</span>, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="co"># If download fails due to network issues, you&#39;ll see:</span></span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="co"># Warning: Download failed for year 2021, using cached data</span></span></code></pre></div>
</div>
<div id="cache-management" class="section level2">
<h2>Cache Management</h2>
<div id="viewing-cache-information" class="section level3">
<h3>Viewing Cache Information</h3>
<p>Use <code>get_cache_info()</code> to inspect your cached data:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="co"># View all cached files</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>cache_info <span class="ot">&lt;-</span> <span class="fu">get_cache_info</span>()</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a><span class="fu">print</span>(cache_info)</span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a><span class="co">#      filename size_mb            modified    function_type</span></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a><span class="co"># 1  col_2023.zip    45.2 2024-01-15 14:23:01     get_col_data</span></span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a><span class="co"># 2  col_2022.zip    43.8 2024-01-15 14:22:45     get_col_data</span></span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a><span class="co"># 3 price_abc123.parquet 2.1 2024-01-15 14:20:15  get_price_data</span></span></code></pre></div>
</div>
<div id="clearing-cache" class="section level3">
<h3>Clearing Cache</h3>
<p>Use <code>clear_rfcip_cache()</code> with various filtering
options:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="co"># Clear all cached data</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a><span class="fu">clear_rfcip_cache</span>()</span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a><span class="co"># Clear only cause of loss data</span></span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a><span class="fu">clear_rfcip_cache</span>(<span class="at">function_name =</span> <span class="st">&quot;get_col_data&quot;</span>)</span>
<span id="cb24-6"><a href="#cb24-6" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" tabindex="-1"></a><span class="co"># Clear specific years</span></span>
<span id="cb24-8"><a href="#cb24-8" tabindex="-1"></a><span class="fu">clear_rfcip_cache</span>(<span class="at">years =</span> <span class="fu">c</span>(<span class="dv">2023</span>, <span class="dv">2024</span>))</span>
<span id="cb24-9"><a href="#cb24-9" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" tabindex="-1"></a><span class="co"># Clear livestock data for specific program</span></span>
<span id="cb24-11"><a href="#cb24-11" tabindex="-1"></a><span class="fu">clear_rfcip_cache</span>(<span class="at">function_name =</span> <span class="st">&quot;get_livestock_data&quot;</span>, <span class="at">program =</span> <span class="st">&quot;LRP&quot;</span>)</span></code></pre></div>
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
